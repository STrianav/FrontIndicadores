import{a as V}from"./chunk-7GZO4EV5.js";import{c as j}from"./chunk-TNF5RKJF.js";import{a as F}from"./chunk-F6LDSNR5.js";import{a as M,c as q,g as N,o as A}from"./chunk-TGO5R4BE.js";import{h as I,i as E}from"./chunk-YSL4L367.js";import{Fb as n,Gb as o,Ib as C,Jb as h,Kb as T,Na as r,Ta as v,Xa as y,ab as x,d as k,ha as f,ia as b,kb as p,ob as t,pb as i,qb as S,r as g,tb as _,xb as m,yb as u}from"./chunk-RCD2EZCC.js";function L(c,l){if(c&1){let e=_();t(0,"button",3),m("click",function(){f(e);let d=u();return b(d.Crudd("C"))}),n(1,"Nuevo"),i()}}function P(c,l){if(c&1){let e=_();t(0,"button",12),m("click",function(){f(e);let d=u().$implicit,s=u();return b(s.Crudd("U",d))}),S(1,"i",13),i()}}function U(c,l){if(c&1){let e=_();t(0,"button",14),m("click",function(){f(e);let d=u().$implicit,s=u();return b(s.Crudd("D",d))}),S(1,"i",15),i()}}function G(c,l){if(c&1&&(t(0,"tr")(1,"td"),x(2,P,2,0,"button",10)(3,U,2,0,"button",11),i(),t(4,"td"),n(5),i(),t(6,"td"),n(7),i(),t(8,"td"),n(9),i(),t(10,"td"),n(11),i(),t(12,"td"),n(13),i(),t(14,"td"),n(15),i(),t(16,"td"),n(17),i(),t(18,"td"),n(19),i(),t(20,"td"),n(21),i(),t(22,"td"),n(23),i(),t(24,"td"),n(25),i(),t(26,"td"),n(27),i(),t(28,"td"),n(29),i(),t(30,"td"),n(31),i()()),c&2){let e=l.$implicit,a=u();r(2),p("ngIf",a.roles.includes("admin")||a.roles.includes("Validador")),r(),p("ngIf",a.roles.includes("admin")),r(2),o(e.codigo),r(2),o(e.nombre),r(2),o(e.objetivo),r(2),o(e.alcance),r(2),o(e.formula),r(2),o(e.fkidtipoindicador_descripcion),r(2),o(e.fkidunidadmedicion_descripcion),r(2),o(e.meta),r(2),o(e.fkidsentido_descripcion),r(2),o(e.fkidfrecuencia_descripcion),r(2),o(e.fkidarticulo_descripcion),r(2),o(e.fkidliteral_descripcion),r(2),o(e.fkidnumeral_descripcion),r(2),o(e.fkidparagrafo_descripcion)}}var O=class c{constructor(l,e,a){this.api=l;this.modal=e;this.general=a}data;Tabla="indicador";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let l=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(e=>Object.values(e).some(a=>a?.toString().toLowerCase().includes(l)))}TraerTabla(){return k(this,null,function*(){try{this.data=yield g(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(l){console.error("Error al obtener la tabla:",l)}})}Crudd(l,e){let a;if(l==="C"){this.modal.openModalIndicador().result.then(D=>{D&&this.TraerTabla()});return}else l==="U"&&e?a={fields:[{name:"codigo",label:"C\xF3digo",type:"text",value:e.codigo,validators:["required"]},{name:"nombre",label:"Nombre",type:"text",value:e.nombre,validators:["required"]},{name:"objetivo",label:"Objetivo",type:"text",value:e.objetivo,validators:["required"]},{name:"alcance",label:"Alcance",type:"text",value:e.alcance,validators:["required"]},{name:"formula",label:"F\xF3rmula",type:"text",value:e.formula,validators:["required"]},{name:"fkidtipoindicador",label:"Tipo de Indicador ",type:"text",fk:!0,value:e.fkidtipoindicador,strTable:"tipoindicador",validators:["required"]},{name:"fkidunidadmedicion",label:"Unidad de Medici\xF3n",type:"text",fk:!0,value:e.fkidunidadmedicion,strTable:"unidadmedicion",validators:["required"]},{name:"meta",label:"Meta",type:"text",value:e.meta,validators:["required"]},{name:"fkidsentido",label:"Sentido",type:"text",fk:!0,value:e.fkidsentido,strTable:"sentido",validators:["required"]},{name:"fkidfrecuencia",label:"Frecuencia",type:"text",fk:!0,value:e.fkidfrecuencia,strTable:"frecuencia",validators:["required"]},{name:"fkidarticulo",label:"Art\xEDculo",type:"text",fk:!0,value:e.fkidarticulo,strTable:"articulo",validators:["required"]},{name:"fkidliteral",label:"Literal",type:"text",fk:!0,value:e.fkidliteral,strTable:"literal",validators:["required"]},{name:"fkidnumeral",label:"Numeral",type:"text",fk:!0,value:e.fkidnumeral,strTable:"numeral",validators:["required"]},{name:"fkidparagrafo",label:"Paragrafo",type:"text",fk:!0,value:e.fkidparagrafo,strTable:"paragrafo",validators:["required"]}]}:l==="D"&&e&&(a={fields:[{name:"codigo",label:"C\xF3digo",type:"text",value:e.codigo,validators:[""]},{name:"nombre",label:"Nombre",type:"text",value:e.nombre,validators:[""]},{name:"objetivo",label:"Objetivo",type:"text",value:e.objetivo,validators:[""]},{name:"alcance",label:"Alcance",type:"text",value:e.alcance,validators:[""]},{name:"formula",label:"F\xF3rmula",type:"text",value:e.formula,validators:[""]},{name:"fkidtipoindicador",label:"Tipo de Indicador ",type:"text",fk:!0,value:e.fkidtipoindicador,strTable:"tipoindicador",validators:[""]},{name:"fkidunidadmedicion",label:"Unidad de Medici\xF3n",type:"text",fk:!0,value:e.fkidunidadmedicion,strTable:"unidadmedicion",validators:[""]},{name:"meta",label:"Meta",type:"text",value:e.meta,validators:[""]},{name:"fkidsentido",label:"Sentido",type:"text",fk:!0,value:e.fkidsentido,strTable:"sentido",validators:[""]},{name:"fkidfrecuencia",label:"Frecuencia",type:"text",fk:!0,value:e.fkidfrecuencia,strTable:"frecuencia",validators:[""]},{name:"fkidarticulo",label:"Art\xEDculo",type:"text",fk:!0,value:e.fkidarticulo,strTable:"articulo",validators:[""]},{name:"fkidliteral",label:"Literal",type:"text",fk:!0,value:e.fkidliteral,strTable:"literal",validators:[""]},{name:"fkidnumeral",label:"Numeral",type:"text",fk:!0,value:e.fkidnumeral,strTable:"numeral",validators:[""]},{name:"fkidparagrafo",label:"Paragrafo",type:"text",fk:!0,value:e.fkidparagrafo,strTable:"paragrafo",validators:[""]}]});this.modal.openDynamicModal(a,l,this.Tabla).result.then(()=>{this.TraerTabla()})}Consultas(l){return k(this,null,function*(){try{let e=yield g(this.api.Consultas(l));e.length>0&&this.modal.openConsultas(e,l)}catch{this.general.showAlert("En este momento no se puede mostrar la informaci\xF3n","info",!1,3e3)}})}static \u0275fac=function(e){return new(e||c)(v(F),v(V),v(j))};static \u0275cmp=y({type:c,selectors:[["app-indicador"]],decls:54,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],[2,"display","flex","margin-bottom","26px","gap","7px","flex-wrap","wrap"],[1,"btn","btn-outline-primary",3,"click"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","custom-table","mt-3"],[1,"table-dark"],[4,"ngFor","ngForOf"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"h3",1),n(2,"Indicadores"),i(),t(3,"div",2)(4,"button",3),m("click",function(){return a.Consultas("indicadores-con-detalle")}),n(5,"indicadores con detalle"),i(),t(6,"button",3),m("click",function(){return a.Consultas("indicadores-representacion")}),n(7,"indicadores representacion"),i(),t(8,"button",3),m("click",function(){return a.Consultas("indicadores-actores")}),n(9,"indicadores actores"),i(),t(10,"button",3),m("click",function(){return a.Consultas("indicadores-fuentes")}),n(11,"indicadores fuentes"),i(),t(12,"button",3),m("click",function(){return a.Consultas("indicadores-variables")}),n(13,"indicadores variables"),i(),t(14,"button",3),m("click",function(){return a.Consultas("indicadores-resultados")}),n(15,"indicadores resultados"),i()(),t(16,"input",4),T("ngModelChange",function(s){return h(a.filtroTexto,s)||(a.filtroTexto=s),s}),m("input",function(){return a.filtrarTabla()}),i(),x(17,L,2,0,"button",5),t(18,"div",6)(19,"table",7)(20,"thead",8)(21,"tr")(22,"th"),n(23,"Acciones"),i(),t(24,"th"),n(25,"C\xF3digo"),i(),t(26,"th"),n(27,"Nombre"),i(),t(28,"th"),n(29,"Objetivo"),i(),t(30,"th"),n(31,"Alcance"),i(),t(32,"th"),n(33,"F\xF3rmula"),i(),t(34,"th"),n(35,"Tipo Indicador"),i(),t(36,"th"),n(37,"Unidad Medici\xF3n"),i(),t(38,"th"),n(39,"Meta"),i(),t(40,"th"),n(41,"Sentido"),i(),t(42,"th"),n(43,"Frecuencia"),i(),t(44,"th"),n(45,"Art\xEDculo"),i(),t(46,"th"),n(47,"Literal"),i(),t(48,"th"),n(49,"Numeral"),i(),t(50,"th"),n(51,"Par\xE1grafo"),i()()(),t(52,"tbody"),x(53,G,32,16,"tr",9),i()()()()),e&2&&(r(16),C("ngModel",a.filtroTexto),r(),p("ngIf",a.roles.includes("admin")),r(36),p("ngForOf",a.dataFiltrada))},dependencies:[A,I,E,M,q,N],styles:["@media (min-width: 1200px){.table-responsive[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto}.custom-table[_ngcontent-%COMP%]{width:100%;min-width:1200px}}"]})};export{O as IndicadorComponent};

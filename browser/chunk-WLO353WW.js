import{a as M}from"./chunk-7GZO4EV5.js";import"./chunk-TNF5RKJF.js";import{a as I}from"./chunk-F6LDSNR5.js";import{a as E,c as F,g as N,o as V}from"./chunk-TGO5R4BE.js";import{h as A,i as w}from"./chunk-YSL4L367.js";import{Fb as c,Gb as v,Ib as h,Jb as k,Kb as S,Na as l,Ta as g,Xa as y,ab as f,d as x,ha as u,ia as b,kb as d,ob as n,pb as r,qb as C,r as T,tb as _,xb as p,yb as s}from"./chunk-RCD2EZCC.js";function q(o,i){if(o&1){let t=_();n(0,"button",7),p("click",function(){u(t);let a=s();return b(a.Crudd("C"))}),c(1,"Nuevo"),r()}}function O(o,i){if(o&1){let t=_();n(0,"button",10),p("click",function(){u(t);let a=s().$implicit,m=s();return b(m.Crudd("U",a))}),C(1,"i",11),r()}}function J(o,i){if(o&1){let t=_();n(0,"button",12),p("click",function(){u(t);let a=s().$implicit,m=s();return b(m.Crudd("D",a))}),C(1,"i",13),r()}}function L(o,i){if(o&1&&(n(0,"tr")(1,"td"),f(2,O,2,0,"button",8)(3,J,2,0,"button",9),r(),n(4,"td"),c(5),r(),n(6,"td"),c(7),r()()),o&2){let t=i.$implicit,e=s();l(2),d("ngIf",e.roles.includes("admin")||e.roles.includes("Validador")),l(),d("ngIf",e.roles.includes("admin")),l(2),v(t.nombre),l(2),v(t.fkidtipoactor_descripcion)}}var D=class o{constructor(i,t){this.api=i;this.modal=t}data;Tabla="actor";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let i=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(t=>Object.values(t).some(e=>e?.toString().toLowerCase().includes(i)))}TraerTabla(){return x(this,null,function*(){try{this.data=yield T(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(i){console.error("Error al obtener la tabla:",i)}})}Crudd(i,t){let e;i==="C"?e={fields:[{name:"nombre",label:"Nombre",type:"text",value:"",validators:["required"]},{name:"fkidtipoactor",label:"Tipo de Actor",type:"number",fk:!0,value:"",strTable:"tipoactor",validators:["required"]}]}:i==="U"?e={fields:[{name:"nombre",label:"Nombre",type:"text",value:t.nombre,validators:["required"]},{name:"fkidtipoactor",label:"Tipo de Actor",type:"number",fk:!0,value:t.fkidtipoactor,strTable:"tipoactor",validators:["required"]}]}:i==="D"&&(e={fields:[{name:"nombre",label:"Nombre",type:"text",value:t.nombre,validators:["required"]},{name:"fkidtipoactor",label:"Tipo de Actor",type:"number",fk:!0,value:t.fkidtipoactor,strTable:"tipoactor",validators:["required"]}]}),this.modal.openDynamicModal(e,i,this.Tabla).result.then(()=>{this.TraerTabla()})}static \u0275fac=function(t){return new(t||o)(g(I),g(M))};static \u0275cmp=y({type:o,selectors:[["app-actor"]],decls:16,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"h3",1),c(2,"Actor"),r(),n(3,"input",2),S("ngModelChange",function(m){return k(e.filtroTexto,m)||(e.filtroTexto=m),m}),p("input",function(){return e.filtrarTabla()}),r(),f(4,q,2,0,"button",3),n(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),c(9,"Acciones"),r(),n(10,"th"),c(11,"Nombre"),r(),n(12,"th"),c(13,"Nombre tipo indicador"),r()()(),n(14,"tbody"),f(15,L,8,4,"tr",6),r()()()),t&2&&(l(3),h("ngModel",e.filtroTexto),l(),d("ngIf",e.roles.includes("admin")),l(11),d("ngForOf",e.dataFiltrada))},dependencies:[V,A,w,E,F,N],encapsulation:2})};export{D as ActorComponent};

import{g as s}from"./chunk-YOE35VFI.js";import{c as l}from"./chunk-TNF5RKJF.js";import{a as c}from"./chunk-F6LDSNR5.js";import{$ as r,W as n,d as o,r as a}from"./chunk-RCD2EZCC.js";var u=class i{constructor(t,e,v){this.api=t;this.router=e;this.general=v}canActivate(){return o(this,null,function*(){if(!sessionStorage.getItem("token"))return this.general.showAlert("Tu sesi\xF3n ha caducado. Vuelve a iniciar sesi\xF3n.","info",!0,3e3).then(()=>{this.router.navigate(["/login"])}),!1;try{return(yield a(this.api.validarToken()))?.mensaje==="Token v\xE1lido"?!0:(this.general.showAlert("Tu sesi\xF3n ha caducado. Vuelve a iniciar sesi\xF3n.","info",!0,3e3).then(()=>{this.router.navigate(["/login"])}),!1)}catch(e){return console.error("Error validando el token:",e),this.general.showAlert("Tu sesi\xF3n ha caducado. Vuelve a iniciar sesi\xF3n.","info",!0,3e3).then(()=>{this.router.navigate(["/login"])}),!1}})}static \u0275fac=function(e){return new(e||i)(r(c),r(s),r(l))};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};

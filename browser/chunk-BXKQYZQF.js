import{a as D}from"./chunk-7GZO4EV5.js";import"./chunk-TNF5RKJF.js";import{a as I}from"./chunk-F6LDSNR5.js";import{a as F,c as q,g as N,o as V}from"./chunk-TGO5R4BE.js";import{h as A,i as E}from"./chunk-YSL4L367.js";import{Fb as a,Gb as p,Ib as k,Jb as T,Kb as h,Na as l,Ta as x,Xa as S,ab as _,d as y,ha as b,ia as f,kb as m,ob as i,pb as n,qb as g,r as C,tb as v,xb as u,yb as d}from"./chunk-RCD2EZCC.js";function w(o,r){if(o&1){let e=v();i(0,"button",7),u("click",function(){b(e);let c=d();return f(c.Crudd("C"))}),a(1,"Nuevo"),n()}}function O(o,r){if(o&1){let e=v();i(0,"button",10),u("click",function(){b(e);let c=d().$implicit,s=d();return f(s.Crudd("U",c))}),g(1,"i",11),n()}}function J(o,r){if(o&1){let e=v();i(0,"button",12),u("click",function(){b(e);let c=d().$implicit,s=d();return f(s.Crudd("D",c))}),g(1,"i",13),n()}}function L(o,r){if(o&1&&(i(0,"tr")(1,"td"),_(2,O,2,0,"button",8)(3,J,2,0,"button",9),n(),i(4,"td"),a(5),n(),i(6,"td"),a(7),n(),i(8,"td"),a(9),n(),i(10,"td"),a(11),n()()),o&2){let e=r.$implicit,t=d();l(2),m("ngIf",t.roles.includes("admin")||t.roles.includes("Validador")),l(),m("ngIf",t.roles.includes("admin")),l(2),p(e.nombre),l(2),p(e.descripcion),l(2),p(e.fkidseccion_descripcion),l(2),p(e.fkidsubseccion_descripcion)}}var M=class o{constructor(r,e){this.api=r;this.modal=e}data;Tabla="articulo";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let r=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(e=>Object.values(e).some(t=>t?.toString().toLowerCase().includes(r)))}TraerTabla(){return y(this,null,function*(){try{this.data=yield C(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(r){console.error("Error al obtener la tabla:",r)}})}Crudd(r,e){let t;r==="C"?t={fields:[{name:"nombre",label:"Nombre",type:"text",value:"",validators:["required"]},{name:"descripcion",label:"Descripci\xF3n",type:"text",value:"",validators:["required"]},{name:"fkidseccion",label:"Secci\xF3n",type:"text",fk:!0,value:"",strTable:"seccion",validators:["required"]},{name:"fkidsubseccion",label:"Subsecci\xF3n",type:"text",fk:!0,value:"",strTable:"subseccion",validators:["required"]}]}:r==="U"?t={fields:[{name:"id",label:"id",type:"text",value:e.id,validators:["required"]},{name:"nombre",label:"Nombre",type:"text",value:e.nombre,validators:["required"]},{name:"descripcion",label:"Descripci\xF3n",type:"text",value:e.descripcion,validators:["required"]},{name:"fkidseccion",label:"Secci\xF3n",type:"text",fk:!0,value:e.fkidseccion,strTable:"seccion",validators:["required"]},{name:"fkidsubseccion",label:"Subsecci\xF3n",type:"text",fk:!0,value:e.fkidsubseccion,strTable:"subseccion",validators:["required"]}]}:r==="D"&&(t={fields:[{name:"id",label:"id",type:"text",value:e.id,validators:["required"]},{name:"nombre",label:"Nombre",type:"text",value:e.nombre,validators:["required"]},{name:"descripcion",label:"Descripci\xF3n",type:"text",value:e.descripcion,validators:["required"]},{name:"fkidseccion",label:"Secci\xF3n",type:"text",fk:!0,value:e.fkidseccion,strTable:"seccion",validators:["required"]},{name:"fkidsubseccion",label:"Subsecci\xF3n",type:"text",fk:!0,value:e.fkidsubseccion,strTable:"subseccion",validators:["required"]}]}),this.modal.openDynamicModal(t,r,this.Tabla).result.then(()=>{this.TraerTabla()})}static \u0275fac=function(e){return new(e||o)(x(I),x(D))};static \u0275cmp=S({type:o,selectors:[["app-articulo"]],decls:20,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"h3",1),a(2,"Articulo"),n(),i(3,"input",2),h("ngModelChange",function(s){return T(t.filtroTexto,s)||(t.filtroTexto=s),s}),u("input",function(){return t.filtrarTabla()}),n(),_(4,w,2,0,"button",3),i(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),a(9,"Acciones"),n(),i(10,"th"),a(11,"Nombre"),n(),i(12,"th"),a(13,"descripcion"),n(),i(14,"th"),a(15,"Secci\xF3n"),n(),i(16,"th"),a(17,"Sub Secci\xF3n"),n()()(),i(18,"tbody"),_(19,L,12,6,"tr",6),n()()()),e&2&&(l(3),k("ngModel",t.filtroTexto),l(),m("ngIf",t.roles.includes("admin")),l(15),m("ngForOf",t.dataFiltrada))},dependencies:[V,A,E,F,q,N],encapsulation:2})};export{M as ArticuloComponent};

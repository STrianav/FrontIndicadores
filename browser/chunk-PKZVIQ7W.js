import{a as D}from"./chunk-7GZO4EV5.js";import"./chunk-TNF5RKJF.js";import{a as U}from"./chunk-F6LDSNR5.js";import{a as F,c as I,g as V,o as M}from"./chunk-TGO5R4BE.js";import{h as E,i as k}from"./chunk-YSL4L367.js";import{Fb as s,Gb as v,Ib as T,Jb as S,Kb as w,Na as l,Ta as C,Xa as h,ab as f,d as x,ha as p,ia as b,kb as u,ob as n,pb as a,qb as g,r as y,tb as _,xb as d,yb as c}from"./chunk-RCD2EZCC.js";function A(r,i){if(r&1){let e=_();n(0,"button",7),d("click",function(){p(e);let o=c();return b(o.Crudd("C"))}),s(1,"Nuevo"),a()}}function O(r,i){if(r&1){let e=_();n(0,"button",10),d("click",function(){p(e);let o=c().$implicit,m=c();return b(m.Crudd("U",o))}),g(1,"i",11),a()}}function q(r,i){if(r&1){let e=_();n(0,"button",12),d("click",function(){p(e);let o=c().$implicit,m=c();return b(m.Crudd("D",o))}),g(1,"i",13),a()}}function J(r,i){if(r&1&&(n(0,"tr")(1,"td"),f(2,O,2,0,"button",8)(3,q,2,0,"button",9),a(),n(4,"td"),s(5),a(),n(6,"td"),s(7),a()()),r&2){let e=i.$implicit,t=c();l(2),u("ngIf",t.roles.includes("admin")||t.roles.includes("Validador")),l(),u("ngIf",t.roles.includes("admin")),l(2),v(e.email),l(2),v(e.contrasena)}}var N=class r{constructor(i,e){this.api=i;this.modal=e}data;Tabla="usuario";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let i=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(e=>Object.values(e).some(t=>t?.toString().toLowerCase().includes(i)))}TraerTabla(){return x(this,null,function*(){try{this.data=yield y(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(i){console.error("Error al obtener la tabla:",i)}})}Crudd(i,e){let t;i==="C"?t={fields:[{name:"email",label:"Correo Electr\xF3nico",type:"email",value:"",validators:["required","email"]},{name:"contrasena",label:"Contrase\xF1a",type:"password",value:"",validators:["required"]}]}:i==="U"?t={fields:[{name:"email",label:"Correo Electr\xF3nico",type:"email",value:e.email,validators:["required","email"]},{name:"contrasena",label:"Contrase\xF1a",type:"password",value:e.contrasena,validators:["required"]}]}:i==="D"&&(t={fields:[{name:"email",label:"Correo Electr\xF3nico",type:"email",value:e.email,validators:[]},{name:"contrasena",label:"Contrase\xF1a",type:"password",value:e.contrasena,validators:[]}]}),this.modal.openDynamicModal(t,i,this.Tabla).result.then(()=>{this.TraerTabla()})}static \u0275fac=function(e){return new(e||r)(C(U),C(D))};static \u0275cmp=h({type:r,selectors:[["app-usuario"]],decls:16,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h3",1),s(2,"Usuarios"),a(),n(3,"input",2),w("ngModelChange",function(m){return S(t.filtroTexto,m)||(t.filtroTexto=m),m}),d("input",function(){return t.filtrarTabla()}),a(),f(4,A,2,0,"button",3),n(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),s(9,"Acciones"),a(),n(10,"th"),s(11,"Email"),a(),n(12,"th"),s(13,"contrase\xF1a"),a()()(),n(14,"tbody"),f(15,J,8,4,"tr",6),a()()()),e&2&&(l(3),T("ngModel",t.filtroTexto),l(),u("ngIf",t.roles.includes("admin")),l(11),u("ngForOf",t.dataFiltrada))},dependencies:[M,E,k,F,I,V],encapsulation:2})};export{N as UsuarioComponent};

import{a as E}from"./chunk-7GZO4EV5.js";import"./chunk-TNF5RKJF.js";import{a as F}from"./chunk-F6LDSNR5.js";import{a as I,c as D,g as M,o as V}from"./chunk-TGO5R4BE.js";import{h as k,i as U}from"./chunk-YSL4L367.js";import{Fb as s,Gb as y,Ib as T,Jb as S,Kb as w,Na as d,Ta as g,Xa as v,ab as _,d as x,ha as u,ia as f,kb as m,ob as o,pb as r,qb as C,r as h,tb as b,xb as p,yb as c}from"./chunk-RCD2EZCC.js";function A(n,i){if(n&1){let t=b();o(0,"button",7),p("click",function(){u(t);let a=c();return f(a.Crudd("C"))}),s(1,"Nuevo"),r()}}function O(n,i){if(n&1){let t=b();o(0,"button",10),p("click",function(){u(t);let a=c().$implicit,l=c();return f(l.Crudd("U",a))}),C(1,"i",11),r()}}function J(n,i){if(n&1){let t=b();o(0,"button",12),p("click",function(){u(t);let a=c().$implicit,l=c();return f(l.Crudd("D",a))}),C(1,"i",13),r()}}function L(n,i){if(n&1&&(o(0,"tr")(1,"td"),_(2,O,2,0,"button",8)(3,J,2,0,"button",9),r(),o(4,"td"),s(5),r()()),n&2){let t=i.$implicit,e=c();d(2),m("ngIf",e.roles.includes("admin")||e.roles.includes("Validador")),d(),m("ngIf",e.roles.includes("admin")),d(2),y(t.descripcion)}}var N=class n{constructor(i,t){this.api=i;this.modal=t}data;Tabla="unidadmedicion";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let i=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(t=>Object.values(t).some(e=>e?.toString().toLowerCase().includes(i)))}TraerTabla(){return x(this,null,function*(){try{this.data=yield h(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(i){console.error("Error al obtener la tabla:",i)}})}Crudd(i,t){let e;i==="C"?e={fields:[{name:"descripcion",label:"Descripcion",type:"text",value:"",validators:["required"]}]}:i==="U"?e={fields:[{name:"descripcion",label:"Descripcion",type:"text",value:t.descripcion,validators:["required"]}]}:i==="D"&&(e={fields:[{name:"descripcion",label:"Descripcion",type:"text",value:t.descripcion,validators:["required"]}]}),this.modal.openDynamicModal(e,i,this.Tabla).result.then(()=>{this.TraerTabla()})}static \u0275fac=function(t){return new(t||n)(g(F),g(E))};static \u0275cmp=v({type:n,selectors:[["app-unidadmedicion"]],decls:14,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"h3",1),s(2,"Unidad Medici\xF3n"),r(),o(3,"input",2),w("ngModelChange",function(l){return S(e.filtroTexto,l)||(e.filtroTexto=l),l}),p("input",function(){return e.filtrarTabla()}),r(),_(4,A,2,0,"button",3),o(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),s(9,"Acciones"),r(),o(10,"th"),s(11,"Descripcion"),r()()(),o(12,"tbody"),_(13,L,6,3,"tr",6),r()()()),t&2&&(d(3),T("ngModel",e.filtroTexto),d(),m("ngIf",e.roles.includes("admin")),d(9),m("ngForOf",e.dataFiltrada))},dependencies:[V,k,U,I,D,M],encapsulation:2})};export{N as UnidadmedicionComponent};

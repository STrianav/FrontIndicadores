import{a as M}from"./chunk-7GZO4EV5.js";import"./chunk-TNF5RKJF.js";import{a as F}from"./chunk-F6LDSNR5.js";import{a as I,c as N,g as V,o as E}from"./chunk-TGO5R4BE.js";import{h as k,i as R}from"./chunk-YSL4L367.js";import{Fb as c,Gb as y,Ib as T,Jb as S,Kb as w,Na as s,Ta as v,Xa as h,ab as f,d as C,ha as d,ia as b,kb as p,ob as r,pb as o,qb as g,r as x,tb as _,xb as u,yb as m}from"./chunk-RCD2EZCC.js";function A(i,n){if(i&1){let t=_();r(0,"button",7),u("click",function(){d(t);let a=m();return b(a.Crudd("C"))}),c(1,"Nuevo"),o()}}function O(i,n){if(i&1){let t=_();r(0,"button",10),u("click",function(){d(t);let a=m().$implicit,l=m();return b(l.Crudd("U",a))}),g(1,"i",11),o()}}function J(i,n){if(i&1){let t=_();r(0,"button",12),u("click",function(){d(t);let a=m().$implicit,l=m();return b(l.Crudd("D",a))}),g(1,"i",13),o()}}function L(i,n){if(i&1&&(r(0,"tr")(1,"td"),f(2,O,2,0,"button",8)(3,J,2,0,"button",9),o(),r(4,"td"),c(5),o()()),i&2){let t=n.$implicit,e=m();s(2),p("ngIf",e.roles.includes("admin")||e.roles.includes("Validador")),s(),p("ngIf",e.roles.includes("admin")),s(2),y(t.nombre)}}var D=class i{constructor(n,t){this.api=n;this.modal=t}data;Tabla="represenvisual";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let n=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(t=>Object.values(t).some(e=>e?.toString().toLowerCase().includes(n)))}TraerTabla(){return C(this,null,function*(){try{this.data=yield x(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(n){console.error("Error al obtener la tabla:",n)}})}Crudd(n,t){let e;n==="C"?e={fields:[{name:"nombre",label:"Nombre",type:"text",value:"",validators:["required"]}]}:n==="U"?e={fields:[{name:"nombre",label:"Nombre",type:"text",value:t.nombre,validators:["required"]}]}:n==="D"&&(e={fields:[{name:"nombre",label:"Nombre",type:"text",value:t.nombre,validators:["required"]}]}),this.modal.openDynamicModal(e,n,this.Tabla).result.then(()=>{this.TraerTabla()})}static \u0275fac=function(t){return new(t||i)(v(F),v(M))};static \u0275cmp=h({type:i,selectors:[["app-represenvisual"]],decls:14,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"h3",1),c(2,"Represen visual"),o(),r(3,"input",2),w("ngModelChange",function(l){return S(e.filtroTexto,l)||(e.filtroTexto=l),l}),u("input",function(){return e.filtrarTabla()}),o(),f(4,A,2,0,"button",3),r(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),c(9,"Acciones"),o(),r(10,"th"),c(11,"Nombre"),o()()(),r(12,"tbody"),f(13,L,6,3,"tr",6),o()()()),t&2&&(s(3),T("ngModel",e.filtroTexto),s(),p("ngIf",e.roles.includes("admin")),s(9),p("ngForOf",e.dataFiltrada))},dependencies:[E,k,R,I,N,V],encapsulation:2})};export{D as RepresenvisualComponent};

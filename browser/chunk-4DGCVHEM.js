import{a as M}from"./chunk-7GZO4EV5.js";import"./chunk-TNF5RKJF.js";import{a as E}from"./chunk-F6LDSNR5.js";import{a as I,c as F,g as D,o as V}from"./chunk-TGO5R4BE.js";import{h as L,i as w}from"./chunk-YSL4L367.js";import{Fb as s,Gb as C,Ib as T,Jb as k,Kb as S,Na as c,Ta as g,Xa as y,ab as b,d as v,ha as p,ia as f,kb as d,ob as n,pb as r,qb as x,r as h,tb as _,xb as u,yb as m}from"./chunk-RCD2EZCC.js";function N(a,i){if(a&1){let e=_();n(0,"button",7),u("click",function(){p(e);let l=m();return f(l.Crudd("C"))}),s(1,"Nuevo"),r()}}function O(a,i){if(a&1){let e=_();n(0,"button",10),u("click",function(){p(e);let l=m().$implicit,o=m();return f(o.Crudd("U",l))}),x(1,"i",11),r()}}function q(a,i){if(a&1){let e=_();n(0,"button",12),u("click",function(){p(e);let l=m().$implicit,o=m();return f(o.Crudd("D",l))}),x(1,"i",13),r()}}function J(a,i){if(a&1&&(n(0,"tr")(1,"td"),b(2,O,2,0,"button",8)(3,q,2,0,"button",9),r(),n(4,"td"),s(5),r(),n(6,"td"),s(7),r()()),a&2){let e=i.$implicit,t=m();c(2),d("ngIf",t.roles.includes("admin")||t.roles.includes("Validador")),c(),d("ngIf",t.roles.includes("admin")),c(2),C(e.descripcion),c(2),C(e.fkidarticulo_descripcion)}}var A=class a{constructor(i,e){this.api=i;this.modal=e}data;Tabla="literal";rolesJson=sessionStorage.getItem("roles");roles=[];filtroTexto="";dataFiltrada=[];ngOnInit(){this.TraerTabla(),this.roles=this.rolesJson?JSON.parse(this.rolesJson):[]}filtrarTabla(){let i=this.filtroTexto.toLowerCase();this.dataFiltrada=this.data.filter(e=>Object.values(e).some(t=>t?.toString().toLowerCase().includes(i)))}TraerTabla(){return v(this,null,function*(){try{this.data=yield h(this.api.TraerTabla(this.Tabla)),this.dataFiltrada=this.data}catch(i){console.error("Error al obtener la tabla:",i)}})}Crudd(i,e){let t;i==="C"?t={fields:[{name:"descripcion",label:"Descripci\xF3n",type:"text",value:"",validators:["required"]},{name:"fkidarticulo",label:"Art\xEDculo",type:"text",fk:!0,value:"",strTable:"articulo",validators:["required"]}]}:i==="U"?t={fields:[{name:"descripcion",label:"Descripci\xF3n",type:"text",value:e.descripcion,validators:["required"]},{name:"fkidarticulo",label:"Art\xEDculo",type:"text",fk:!0,value:e.fkidarticulo,strTable:"articulo",validators:["required"]}]}:i==="D"&&(t={fields:[{name:"descripcion",label:"Descripci\xF3n",type:"text",value:e.descripcion,disabled:!0},{name:"fkidarticulo",label:"Art\xEDculo",type:"text",fk:!0,value:e.fkidarticulo,strTable:"articulo",disabled:!0}]}),this.modal.openDynamicModal(t,i,this.Tabla).result.then(()=>this.TraerTabla()).catch(o=>console.error("Error en el modal:",o))}static \u0275fac=function(e){return new(e||a)(g(E),g(M))};static \u0275cmp=y({type:a,selectors:[["app-literal"]],decls:16,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["type","text","placeholder","Buscar indicador...",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"table","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-sm btn-outline-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h3",1),s(2,"Literal"),r(),n(3,"input",2),S("ngModelChange",function(o){return k(t.filtroTexto,o)||(t.filtroTexto=o),o}),u("input",function(){return t.filtrarTabla()}),r(),b(4,N,2,0,"button",3),n(5,"table",4)(6,"thead",5)(7,"tr")(8,"th"),s(9,"Acciones"),r(),n(10,"th"),s(11,"Descripcion"),r(),n(12,"th"),s(13,"Articulo"),r()()(),n(14,"tbody"),b(15,J,8,4,"tr",6),r()()()),e&2&&(c(3),T("ngModel",t.filtroTexto),c(),d("ngIf",t.roles.includes("admin")),c(11),d("ngForOf",t.dataFiltrada))},dependencies:[V,L,w,I,F,D],encapsulation:2})};export{A as LiteralComponent};
